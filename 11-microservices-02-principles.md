
# Домашнее задание к занятию "11.02 Микросервисы: принципы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway 
```
Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- Маршрутизация запросов к нужному сервису на основе конфигурации
- Возможность проверки аутентификационной информации в запросах
- Обеспечение терминации HTTPS

Обоснуйте свой выбор.  
```
|Gateway|Развертывание|Хранение|Open Source|Core|On Premise|free|
  | --- |:---:|:---:|:---:|:---:|:---:|:--- |
  |Azure|Облако, PaaS|Облако, PaaS|-|proprietary|-|-|  
  |Amazon|Облако, PaaS|Облако, PaaS|-|proprietary|-|-|
  |APIGee|Облако, SaaS/single/multi nodes|Cassandra, Postgres, zookeeper|-|Java|+/SaaS|-|
  |Express Gateway|гибкий дизайн|redis|+|nodeJS|+|+|
  |Kong|single/multi nodes|Cassandra, Postgres|+|NginX, Lua|+|+|
  |Tyk|single/multi nodes|redis|+|Golang|+|+|

Требования по маршрутизации запросов, аутентификации и HTTPS обеспечивают практически все современные решения.  
Выбор конкретного решения, как мне кажется, нужно делать с учетом используемых технологий, а не ставить API Gateway во главу угла.  
Например, при использовании облачной архитектуры было бы логично использовать решение того же вендора. Для несложных проектов подойдет тот же NginX.  
В остальных случаях нужно смотреть на свой стек технологий и предпочтений разработчиков.  



## Задача 2: Брокер сообщений
```
Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- Поддержка кластеризации для обеспечения надежности
- Хранение сообщений на диске в процессе доставки
- Высокая скорость работы
- Поддержка различных форматов сообщений
- Разделение прав доступа к различным потокам сообщений
- Протота эксплуатации

Обоснуйте свой выбор.
```  

| Broker|Кластер|Хранение|Скорость|Форматы|Права|Простота|
| --- |:---:|:---:|:---:|:---:|:---:|:--- |  
|Kafka|+|+|++|+|+|-|  
|RabbitMQ|+|+|+|+|+|+|  
|Redis|+|-|+|+|-|+|  
|ActiveMQ|+|+|+|+|+|+|  

Redis подходит для быстрого обмена короткоживущими сообщениями, когда целостность не требуется.  
Kafka предоставляет хорошую производительность на больших объемах, позволяет хранить данные, но может оказаться сложнее в настройке.  
ActiveMQ и RabbitMQ подходят под условия, небольшие различия связаны с поддерживаемыми языками программирования, типом лицензии.  
RabbitMQ несколько быстрее, а ActiveMQ дает больше опций при масштабировании и кластеризации.
